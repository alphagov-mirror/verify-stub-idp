server:
  applicationConnectors:
    - type: http
      port: 80
  adminConnectors:
    - type: http
      port: 81
  requestLog:
    appenders:
      - type: console

logging:
  level: INFO
  appenders:
    - type: console

assertionLifetime: 60m

saml:
  entityId: http://{0}.local/SSO/POST

serviceInfo:
  name: stub-idp

clientTrustStoreConfiguration:
  path: data/pki/hub.ts
  password: marshmallow

signingKeyPairConfiguration:
  privateKeyConfiguration:
    keyFile: data/pki/stub_idp_signing_primary.pk8
  publicKeyConfiguration:
    certFile: data/pki/stub_idp_signing_primary.crt
    name: signing_primary

basicAuthEnabledForUserResource: true

stubIdpsYmlFileLocation: ${STUB_IDP_YAML_FILE_LOCATION}
stubIdpYmlFileRefresh: 10s

infinispan:
  type: standalone
  persistenceToFileEnabled: false
  persistenceFileLocation: apps-local-data/infinispanStubIdpCache

assets:
  overrides:
    /assets: ${STUB_IDP_ASSET_LOCATION}

hubEntityId: https://dev-hub.local

metadata:
  uri: ${METADATA_URL}
  trustStore:
    path: data/pki/metadata.ts
    password: marshmallow
  minRefreshDelay: 60000
  maxRefreshDelay: 600000
  expectedEntityId: https://dev-hub.local
  client:
    timeout: 2s
    timeToLive: 10m
    cookiesEnabled: false
    connectionTimeout: 1s

europeanIdentity:
  enabled: ${EUROPEAN_IDENTITY_ENABLED:-false}
  hubConnectorEntityId: ${HUB_CONNECTOR_ENTITY_ID:-http://DefaultNotUsed}
  stubCountryBaseUrl: https://${STUB_IDP_HOSTNAME:-DefaultNotUsed}
  metadata:
    jerseyClientName: connector-metadata-client
    client:
      timeout: 60s
      timeToLive: 10m
      connectionTimeout: 4s
      tls:
        protocol: TLSv1.2
        verifyHostname: false
    uri: ${HUB_CONNECTOR_ENTITY_ID:-http://DefaultNotUsed}
    trustStore:
      path: ${TRUSTSTORE_PATH}/ida_metadata_truststore.ts
      password: ${TRUSTSTORE_PASSWORD}
    minRefreshDelay: 30000
    maxRefreshDelay: 1800000
    expectedEntityId: ${HUB_CONNECTOR_ENTITY_ID:-http://DefaultNotUsed}

database:
# Ensure to run the application you have DB_URI
# Format for DB_URI: jdbc:postgresql://host-name:port/database-name?user=user-name&password=password
# example: jdbc:postgresql://localhost:5432/postgres?user=postgres&password=password
  url: ${DB_URI:-}
#  url: ${DB_URI:-jdbc:postgresql://localhost:5432/postgres?user=postgres&password=password}